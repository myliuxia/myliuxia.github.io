(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{445:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("背景：使用Windows PowerShell连接服务器，安装Ngnix\n")])]),s._v(" "),a("h1",{attrs:{id:"nginx-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装"}},[s._v("#")]),s._v(" Nginx 安装")]),s._v(" "),a("p",[s._v("背景：使用Windows PowerShell连接服务器，安装Ngnix")]),s._v(" "),a("h3",{attrs:{id:"一、安装编译工具及库文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装编译工具及库文件"}},[s._v("#")]),s._v(" 一、安装编译工具及库文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" zlib zlib-devel gcc-c++ libtool  openssl openssl-devel\n")])])]),a("h3",{attrs:{id:"二、安装-pcre"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、安装-pcre"}},[s._v("#")]),s._v(" 二、安装 PCRE")]),s._v(" "),a("p",[s._v("PCRE作用是让nginx支持Rewrite功能")]),s._v(" "),a("blockquote",[a("p",[s._v("1、下载PCRE安装包")])]),s._v(" "),a("p",[s._v("下载地址："),a("a",{attrs:{href:"http://downloads.sourceforge.net/project/pcre/pcre/8.43/pcre-8.43.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://downloads.sourceforge.net/project/pcre/pcre/8.43/pcre-8.43.tar.gz"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/src/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget http://downloads.sourceforge.net/project/pcre/pcre/8.43/pcre-8.43.tar.gz")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("2、解压安装包")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar zxvf pcre-8.43.tar.gz")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("3、进入安装目录")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd pcre-8.43")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("4、编译安装")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service pcre-8.43"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./configure")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service pcre-8.43"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make && make install")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("5、查看pcre版本")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service pcre-8.43"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pcre-config --version")]),s._v("\n")])])]),a("p",[s._v("显示版本号，则说明安装成功！")]),s._v(" "),a("h3",{attrs:{id:"三、安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、安装-nginx"}},[s._v("#")]),s._v(" 三、安装 Nginx")]),s._v(" "),a("blockquote",[a("p",[s._v("1、下载Nginx")])]),s._v(" "),a("p",[s._v("下载地址："),a("a",{attrs:{href:"http://nginx.org/download/nginx-1.18.0.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/nginx-1.18.0.tar.gz"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/src/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget http://nginx.org/download/nginx-1.18.0.tar.gz")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("2、解压安装包")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar zxvf nginx-1.18.0.tar.gz  ")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("3、进入安装目录")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd nginx-1.18.0   ")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("4、编译安装")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service nginx-1.18.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./configure --prefix=/usr/local/webserver/nginx --with-http_ssl_module --with-http_gzip_static_module --with-pcre=/usr/local/src/pcre-8.43")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service nginx-1.18.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make && make install")]),s._v("\n")])])]),a("p",[s._v("编译时几个配置项含义如下：")]),s._v(" "),a("p",[a("code",[s._v("--prefix=PATH")]),s._v(":设置安装目录路径")]),s._v(" "),a("p",[a("code",[s._v("--with-http_ssl_module")]),s._v(":启用HTTP_SSL模块，用于构建HTTPS服务。默认情况下不构建此模块.")]),s._v(" "),a("p",[a("code",[s._v("--with-http_gzip_static_module")]),s._v(':启用HTTP_Gzip_Static模块，用于将静态内容压缩成".gz"为文件扩展名的预压缩文件，并缓存在本地，在响应时会将此文件发送以替代普通文件，运用此模块的好处就是不需要（Gzip）每次传输时都需要对文件进行处理压缩。默认情况下不构建此模块')]),s._v(" "),a("p",[a("code",[s._v("--with-pcre=DIR")]),s._v(":若你是源码安装的PCRE库，则需要通过此项设置PCRE库的所在目录路径。")]),s._v(" "),a("p",[s._v("其他配置项及含义可通过"),a("code",[s._v("./configure --help")]),s._v("查看")]),s._v(" "),a("blockquote",[a("p",[s._v("5、查看Nginx版本")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service nginx-1.18.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -v")]),s._v("\nnginx version: nginx/1.18.0\n")])])]),a("p",[s._v("显示版本号，则说明安装成功！")]),s._v(" "),a("h3",{attrs:{id:"四、nginx-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、nginx-常用命令"}},[s._v("#")]),s._v(" 四、Nginx 常用命令")]),s._v(" "),a("blockquote",[a("p",[s._v("1、指定 Nginx 配置文件")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -c /usr/local/webserver/nginx/conf/nginx.conf")]),s._v("\n")])])]),a("p",[s._v("-c表示configuration，指定配置文件。")]),s._v(" "),a("blockquote",[a("p",[s._v("2、检测 Nginx 配置文件是否正确")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -t")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("3、启动 Nginx")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("4、停止 Nginx（通过向nginx发送请求）")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -s stop")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -s quit")]),s._v("\n")])])]),a("p",[s._v("-s都是采用向 Nginx 发送信号的方式。")]),s._v(" "),a("blockquote",[a("p",[s._v("5、Nginx 重载配置")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -s reload")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("6、显示帮助信息")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/webserver/nginx/sbin/nginx -h")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("7、查看 Nginx 进程")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef | grep nginx")]),s._v("\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25900")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":42 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25901")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25900")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":42 ?        00:00:00 nginx: worker process\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29166")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4225")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":03 pts/0    00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto nginx\n")])])]),a("blockquote",[a("p",[s._v("8、停止 Nginx 进程")])]),s._v(" "),a("p",[s._v("先在进程列表中找到主进程号：25900")]),s._v(" "),a("p",[s._v("从容停止Nginx:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -QUIT 25900")]),s._v("\n")])])]),a("p",[s._v("快速停止Nginx:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -TERM 25900")]),s._v("\n")])])]),a("p",[s._v("强制停止Nginx:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cloud-service /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pkill -9 nginx")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);